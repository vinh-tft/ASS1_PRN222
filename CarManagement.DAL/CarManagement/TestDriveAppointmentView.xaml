<Window x:Class="CarManagement.TestDriveAppointmentView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        Title="Test Drive Appointments"
        Height="600" Width="950"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Menu -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0 0 0 10" Width="900">
            <Button Content="Add Appointment" Width="120" Margin="5" Click="BtnAdd_Click"/>
            <Button Content="Update Appointment" Width="140" Margin="5" Click="BtnUpdate_Click"/>
            <Button Content="Delete Appointment" Width="140" Margin="5" Click="BtnDelete_Click"/>
            <Button Content="Refresh" Width="100" Margin="5" Click="BtnRefresh_Click"/>
        </StackPanel>

        <!-- Input Form -->
        <Grid Grid.Row="1" Margin="0 10 0 20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="200"/>
            </Grid.ColumnDefinitions>

            <!-- ID -->
            <Label Content="ID:" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
            <TextBox x:Name="txtId" Grid.Row="0" Grid.Column="1" Margin="5" IsReadOnly="True"/>

            <!-- Customer -->
            <Label Content="Customer:" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center"/>
            <ComboBox x:Name="cbCustomer"
                      Grid.Row="0" Grid.Column="3"
                      Margin="5"
                      DisplayMemberPath="FullName"
                      SelectedValuePath="Id"/>

            <!-- Car -->
            <Label Content="Car:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
            <ComboBox x:Name="cbCar"
                      Grid.Row="1" Grid.Column="1"
                      Margin="5"
                      DisplayMemberPath="Name"
                      SelectedValuePath="Id"/>

            <!-- Appointment Date & Time -->
            <Label Content="Appointment Date &amp; Time:" Grid.Row="1" Grid.Column="2" VerticalAlignment="Center"/>
            <xctk:DateTimePicker x:Name="dpAppointmentDateTime" 
                                 Grid.Row="1" Grid.Column="3" 
                                 Margin="5"
                                 Format="Custom"
                                 FormatString="dd/MM/yyyy HH:mm"
                                 TimeFormat="ShortTime"/>

            <!-- Note -->
            <Label Content="Note:" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
            <TextBox x:Name="txtNote" Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3" Margin="5"/>

            <!-- CreatedAt -->
            <Label Content="Created At:" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center"/>
            <TextBox x:Name="txtCreatedAt" Grid.Row="3" Grid.Column="1" Margin="5" IsReadOnly="True"/>
        </Grid>

        <!-- DataGrid -->
        <DataGrid x:Name="dgAppointments"
                  Grid.Row="2"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  SelectionChanged="dgAppointments_SelectionChanged">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="60"/>
                <DataGridTextColumn Header="Customer" Binding="{Binding Customer.FullName}" Width="180"/>
                <DataGridTextColumn Header="Car" Binding="{Binding Car.Name}" Width="180"/>
                <DataGridTextColumn Header="Appointment Date" Binding="{Binding AppointmentDate, StringFormat={}{0:dd/MM/yyyy HH:mm}}" Width="180"/>
                <DataGridTextColumn Header="Note" Binding="{Binding Note}" Width="200"/>
                <DataGridTextColumn Header="Created At" Binding="{Binding CreatedAt, StringFormat={}{0:dd/MM/yyyy HH:mm}}" Width="160"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>